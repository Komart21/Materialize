<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://fonts.gstatic.com https://code.jquery.com data: https://newsapi.org 'unsafe-eval'; style-src 'self' https://fonts.googleapis.com 'unsafe-inline'; media-src *; img-src * 'self' data: content:;">
    <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
    <title>Noticias sobre Tesla con AJAX</title>

    <!-- Materialize CSS -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">

    <!-- Puedes agregar tu propio archivo de CSS aquí si es necesario -->
    <link href="css/index.css" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>
<body>

    <!-- Contenedor de noticias -->
    <div class="container" id="news-container">
        <h2>Últimas noticias sobre Tesla</h2>
        <div id="news-list"></div>  <!-- Aquí se mostrarán las noticias -->
    </div>

    <!-- JavaScript -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script>
        // Función para obtener las noticias de NewsAPI relacionadas con Tesla
        function fetchNews() {
            $.ajax({
                method: "GET",
                url: "https://newsapi.org/v2/everything?q=tesla&from=2024-11-17&sortBy=publishedAt&apiKey=API_KEY",  // Reemplaza con tu clave de API
                dataType: "json",
                success: function(response) {
                    let newsHTML = '';
                    response.articles.forEach(article => {
                        newsHTML += `
                            <div class="news-item">
                                <h5><a href="${article.url}" target="_blank">${article.title}</a></h5>
                                <p>${article.description}</p>
                                <!-- Imagen (si está disponible) -->
                                ${article.urlToImage ? `<img src="${article.urlToImage}" alt="Imagen de noticia" class="responsive-img">` : ''}
                                <p><strong>${article.source.name}</strong></p>
                            </div>
                        `;
                    });
                    $('#news-list').html(newsHTML);  // Insertar las noticias en el contenedor
                },
                error: function() {
                    alert("Hubo un error al obtener las noticias.");
                }
            });
        }

        // Ejecutar la función cuando la página esté lista
        $(document).ready(function() {
            fetchNews();  // Llamar la función para cargar las noticias
        });
    </script>

</body>
</html>
